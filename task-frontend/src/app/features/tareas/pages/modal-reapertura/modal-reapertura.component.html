<div class="p-2">
  <ion-toolbar>
    <div class="pl-4 font-semibold">Reaperturar Tarea</div>
    <ion-buttons slot="end">
      <ion-button (click)="cerrarModal()">
        <ion-icon name="close-outline" class="text-gray-500"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</div>

<div class="px-4 py-2 h-[calc(100vh-200px)] overflow-y-auto">
  
  <!-- Información de la tarea -->
  <div class="mb-4 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400" *ngIf="tarea">
    <h3 class="font-medium text-blue-900 mb-1">{{ tarea.titulo }}</h3>
    <p class="text-sm text-blue-700">
      Estado actual: <span class="font-medium">{{ tarea.estado }}</span>
    </p>
    <p class="text-sm text-blue-700" *ngIf="tarea.Categoria">
      Categoría: <span class="font-medium">{{ tarea.Categoria }}</span>
    </p>
  </div>

  <div class="flex flex-col gap-4">
    
    <!-- Motivo de reapertura -->
    <div class="">
      <span class="text-sm font-medium text-gray-700 mb-2 block">
        Motivo de reapertura <span class="text-red-500">*</span>
      </span>
      <ion-select  
        fill="outline"
        interface="popover"
        class="custom-select"
        [(ngModel)]="motivoReapertura"
        placeholder="Selecciona un motivo"
      >
        <ion-select-option 
          *ngFor="let motivo of motivosReapertura" 
          [value]="motivo">
          {{ motivo }}
        </ion-select-option>
      </ion-select>
    </div>

    <!-- Observaciones adicionales -->
    <div class="">
      <span class="text-sm font-medium text-gray-700 mb-2 block">
        Observaciones adicionales
      </span>
      <ion-textarea
        fill="outline"
        placeholder="Describe detalles adicionales sobre la reapertura..."
        [(ngModel)]="observaciones"
        [autoGrow]="true"
        rows="3"
        class="custom-textarea"
      ></ion-textarea>
    </div>

    <!-- Nueva prioridad -->
    <div class="">
      <span class="text-sm font-medium text-gray-700 mb-2 block">
        Ajustar prioridad
      </span>
      <ion-select  
        fill="outline"
        interface="popover"
        class="custom-select"
        [(ngModel)]="prioridadNueva"
      >
        <ion-select-option 
          *ngFor="let prioridad of prioridades" 
          [value]="prioridad.valor">
          {{ prioridad.texto }}
        </ion-select-option>
      </ion-select>
    </div>

    <!-- Nueva fecha de vencimiento -->
    <div class="">
      <span class="text-sm font-medium text-gray-700 mb-2 block">
        Ajustar fecha de vencimiento
      </span>
      <ion-datetime
        fill="outline"
        presentation="date"
        [(ngModel)]="fechaVencimientoNueva"
        [min]="new Date().toISOString()"
        class="custom-datetime"
      ></ion-datetime>
    </div>

  </div>
</div>

<ion-footer>
  <ion-toolbar>
    <div class="footer-buttons p-4 flex gap-3">
      <ion-button 
        fill="outline" 
        color="medium" 
        expand="block"
        class="flex-1"
        (click)="cerrarModal()">
        Cancelar
      </ion-button>
      <ion-button 
        fill="solid" 
        color="warning" 
        expand="block"
        class="flex-1"
        [disabled]="!puedeConfirmar"
        >
        Reaperturar Tarea
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>
